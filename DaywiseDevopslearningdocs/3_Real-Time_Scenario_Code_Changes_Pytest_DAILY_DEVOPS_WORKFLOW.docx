3ï¸âƒ£ Real-Time Scenario: Code Changes + Pytest (DAILY DEVOPS WORKFLOW)

Now your most important question ğŸ‘‡

â€œIf code already exists and I modify it, how do we run pytest properly?â€

âœ… Standard Workflow (Used Daily in Companies)
STEP 1: Pull latest code (if team)
git pull

STEP 2: Make code changes

Example:

vi app/main.py

STEP 3: Update tests (IF behavior changed)

ğŸ”‘ MUST KNOW:

Tests should change when behavior changes

Example:

New route added

New validation added

Expected output changed

STEP 4: Update dependencies (if required)

If you add a new library:

pip install flask-login


Then update:

pip freeze > requirements.txt

STEP 5: Install / Sync dependencies
pip install -r requirements.txt


ğŸ”‘ This ensures:

Your local environment matches repo state

CI environment behaves same

STEP 6: Run pytest
python3 -m pytest -v


If tests:

âŒ Fail â†’ fix code or test

âœ… Pass â†’ ready to commit

STEP 7: Commit & push
git add .
git commit -m "Update login logic and tests"
git push

ğŸ”¥ How Jenkins Will Do the Same Thing (IMPORTANT)

In CI:

git checkout
pip install -r requirements.txt
python3 -m pytest -v


Exactly same steps.
Thatâ€™s why local = CI = prod.

ğŸ§  MUST-KNOW CONCEPT (VERY IMPORTANT)
Why requirements.txt matters so much

requirements.txt is the contract between:

Developers

Jenkins

Docker

Kubernetes

If itâ€™s wrong:

CI breaks

Docker builds fail

Prod crashes

âš ï¸ COMMON MISTAKES (AVOID THESE)

âŒ Running pytest without updating dependencies
âŒ Changing code but not tests
âŒ Installing libs locally but forgetting requirements.txt
âŒ Leaving containers running

ğŸ¯ Real Interview Q & A
â“ How do you ensure tests reflect code changes?

Answer:

â€œWhenever functionality changes, we update both code and corresponding pytest cases. Tests are always executed locally and in CI before merging.â€

âœ… Summary (Lock This In)

âœ” Containers are disposable â†’ stop & remove
âœ” Pytest imports code â†’ no server needed
âœ” Tests must evolve with code
âœ” requirements.txt ensures consistency
âœ” Same flow locally & in CI