Iâ€™ll go slow, structured, and practical, exactly like a mentor in a real company.

ğŸš€ STEP-6: Terraform Basics â†’ GKE Cluster Creation

Before writing any code, you must understand WHAT Terraform is, WHY we use it, and HOW it fits into our flow.

1ï¸âƒ£ Where Terraform Fits in OUR Flow (MOST IMPORTANT)
Till now we have:
GitHub
  â†“
Jenkins (CI)
  â†“
Docker Image
  â†“
Artifact Registry

What is missing?

ğŸ‘‰ Infrastructure to RUN the image

So now:

Artifact Registry (image)
   â†“
Terraform (creates infra)
   â†“
GKE (Kubernetes cluster)
   â†“
Application running


ğŸ”‘ Interview line

â€œJenkins builds artifacts, Terraform provisions infrastructure, Kubernetes runs workloads.â€

2ï¸âƒ£ What is Terraform? (Interview-Ready Definition)

Terraform is an Infrastructure as Code tool used to create, update, and delete cloud resources in a repeatable and automated way using declarative configuration files.

In simple words:

Terraform = Blueprint for infrastructure

Instead of clicking in console

We write .tf files

Terraform does exactly what we describe

3ï¸âƒ£ Why DevOps Engineers MUST Use Terraform
Without Terraform:

âŒ Manual clicks
âŒ No consistency
âŒ Hard to recreate infra
âŒ Not auditable

With Terraform:

âœ… Version-controlled infra
âœ… Repeatable
âœ… Easy cleanup (important for cost!)
âœ… Interview-mandatory skill

4ï¸âƒ£ Terraform Core Concepts (MUST KNOW)

Iâ€™ll explain only what we need now, not everything.

ğŸ”¹ Provider

Tells Terraform which cloud to talk to.

Example:

provider "google" {
  project = "your-project-id"
  region  = "us-central1"
}


ğŸ”‘ Meaning:

â€œTerraform, talk to Google Cloudâ€

Uses your gcloud auth

ğŸ”¹ Resource

Actual cloud object.

Example:

resource "google_container_cluster" "gke_cluster" {
  name     = "school-gke-cluster"
  location = "us-central1-a"
}


ğŸ”‘ Meaning:

â€œCreate a GKE clusterâ€

ğŸ”¹ State

Terraform keeps a state file:

terraform.tfstate


ğŸ”‘ This tracks:

What Terraform created

What already exists

What to change or delete

âš ï¸ Never delete state file blindly

5ï¸âƒ£ Our Terraform Scope (VERY IMPORTANT)

We will keep it MINIMAL to control cost.

We will create:

âœ… GKE cluster (1 node only)

We will NOT create (now):

âŒ Cloud SQL
âŒ Load balancer separately
âŒ Complex networking

This keeps:

Learning simple

Cost minimal

Cleanup easy

6ï¸âƒ£ Folder Structure for Terraform (STANDARD)

Inside your repo, create:

terraform/
 â”œâ”€â”€ main.tf
 â”œâ”€â”€ variables.tf
 â””â”€â”€ outputs.tf


ğŸ”‘ Interview note

Keeping Terraform code separate from app code is best practice.

7ï¸âƒ£ Terraform Installation (Check First)

Run:

terraform version


If not installed:

sudo apt update
sudo apt install -y terraform


Verify again:

terraform version

8ï¸âƒ£ Terraform â€“ GKE Cluster Code (MINIMAL & SAFE)
ğŸ“„ terraform/main.tf
provider "google" {
  project = var.project_id
  region  = var.region
}

resource "google_container_cluster" "primary" {
  name     = "school-gke-cluster"
  location = "us-central1-a"

  remove_default_node_pool = true
  initial_node_count       = 1
}

resource "google_container_node_pool" "primary_nodes" {
  name       = "primary-node-pool"
  location   = "us-central1-a"
  cluster    = google_container_cluster.primary.name
  node_count = 1

  node_config {
    machine_type = "e2-medium"
    oauth_scopes = [
      "https://www.googleapis.com/auth/cloud-platform"
    ]
  }
}

ğŸ“„ terraform/variables.tf
variable "project_id" {
  description = "GCP Project ID"
}

variable "region" {
  description = "GCP Region"
  default     = "us-central1"
}

ğŸ“„ terraform/outputs.tf
output "cluster_name" {
  value = google_container_cluster.primary.name
}

9ï¸âƒ£ Terraform Commands (DAY-TO-DAY â€“ MUST KNOW)

From terraform/ directory:

Initialize
terraform init


ğŸ‘‰ Downloads provider plugins

Plan
terraform plan -var="project_id=YOUR_PROJECT_ID"


ğŸ‘‰ Shows what will be created

Apply
terraform apply -var="project_id=YOUR_PROJECT_ID"


ğŸ‘‰ Creates GKE cluster
Type yes when prompted

ğŸ”‘ Interview Tip

Never run terraform apply without seeing terraform plan.

10ï¸âƒ£ Cost Safety (IMPORTANT)

âš ï¸ GKE cluster costs money while running

So we will:

Test deployment

Then DELETE cluster

Cleanup command:

terraform destroy -var="project_id=YOUR_PROJECT_ID"

11ï¸âƒ£ What Comes AFTER Cluster Creation

Once GKE is ready:
1ï¸âƒ£ Connect kubectl to cluster
2ï¸âƒ£ Create Kubernetes Deployment
3ï¸âƒ£ Create Service (LoadBalancer)
4ï¸âƒ£ Access app via browser

That will be Step-7.

12ï¸âƒ£ What You Should Do NOW (Action Items)

1ï¸âƒ£ Install Terraform
2ï¸âƒ£ Create terraform/ folder & files
3ï¸âƒ£ Run:

terraform init
terraform plan


âŒ Do NOT apply yet until you confirm plan output

ğŸš¦Reply with ONE line after plan succeeds:

â€œTerraform plan completed successfully, ready to applyâ€

We will then create the GKE cluster together and continue ğŸš€