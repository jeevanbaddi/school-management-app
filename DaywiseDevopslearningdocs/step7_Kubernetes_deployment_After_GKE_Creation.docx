âœ… STEP-7: Kubernetes Deployment (After GKE Creation)
ğŸ” FLOW (LOCK THIS)
GKE cluster
 â†’ kubectl configured
 â†’ Deployment created
 â†’ Service exposed
 â†’ App accessible


1ï¸âƒ£ Connect kubectl to GKE (MANDATORY)
Run this exactly:
gcloud container clusters get-credentials school-gke-cluster \
  --zone us-central1-a \
  --project velvety-maker-480912-u3

Verify:
kubectl get nodes

Expected:
STATUS: Ready

ğŸ”‘ If nodes are Ready â†’ cluster is usable

2ï¸âƒ£ Create Kubernetes Deployment (App)
We will deploy the image that Jenkins pushed to Artifact Registry.
ğŸ“„ k8s-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: school-app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: school-app
  template:
    metadata:
      labels:
        app: school-app
    spec:
      containers:
      - name: school-app
        image: us-central1-docker.pkg.dev/velvety-maker-480912-u3/school-app-repo/school-app:jenkins-<LATEST_BUILD_NUMBER>
        ports:
        - containerPort: 5000

ğŸ‘‰ Replace <LATEST_BUILD_NUMBER> with the latest Jenkins build tag.
Apply:
kubectl apply -f k8s-deployment.yaml

Verify:
kubectl get pods

Expected: Pod status = Running

3ï¸âƒ£ Expose Application (Service)
ğŸ“„ k8s-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: school-app-service
spec:
  type: LoadBalancer
  selector:
    app: school-app
  ports:
  - port: 80
    targetPort: 5000

Apply:
kubectl apply -f k8s-service.yaml


4ï¸âƒ£ Get Public IP (THIS IS THE RESULT)
kubectl get svc school-app-service

Wait 1â€“2 minutes.
You will see:
EXTERNAL-IP: <PUBLIC_IP>

Open in browser:
http://<PUBLIC_IP>

1ï¸âƒ£ Run the correct command to see the Service
kubectl get svc school-app-service


You should see something like:

NAME                 TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)
school-app-service   LoadBalancer   10.xx.xx.xx    35.238.96.21     80:xxxxx/TCP


ğŸ‘‰ 35.238.96.21 is your public IP

2ï¸âƒ£ Open the application in browser ğŸŒ

Open your browser and go to:

http://35.238.96.21


ğŸ‰ You should now see your School Management web application running on GKE.

ğŸ§  MUST-KNOW (INTERVIEW LEVEL)

Kubernetes commands (kubectl) produce output.
You never re-run output lines as shell commands.

ğŸ” If the page does NOT load (quick checks)
Check pods
kubectl get pods


Must be Running.

Check logs
kubectl logs <pod-name>

Check service details
kubectl describe svc school-app-service


Ensure:

TargetPort: 5000

Endpoints exist

ğŸ“ Notes (30 mins max â€“ ONLY THIS)
ğŸ“Œ Concept: Accessing GKE LoadBalancer

Flow

kubectl get svc â†’ External IP â†’ Browser


Commands

kubectl get svc
kubectl describe svc
kubectl logs pod


Common Errors

Running output as command

EXTERNAL-IP pending

Port mismatch

Interview Explanation

LoadBalancer services expose applications via a public IP in GKE.

ğŸ‰ Your application is LIVE on GKE

ğŸ§  Common Errors (YOU SHOULD KNOW)
ErrorWhyImagePullBackOffWrong image tag / repoPending serviceLoad balancer still provisioningCrashLoopBackOffApp error / wrong port

ğŸ¤ Interview-Style Explanation

How do you deploy an app to GKE?
Answer:
After creating the GKE cluster using Terraform, I configure kubectl, deploy the application using a Kubernetes Deployment, expose it using a LoadBalancer Service, and access the application via the external IP.


ğŸ“ NOTES (30 mins MAX â€“ ONLY THIS)
ğŸ“Œ Concept: GKE Application Deployment
Flow
kubectl â†’ Deployment â†’ Service â†’ Public IP

Commands
kubectl apply -f deployment.yaml
kubectl apply -f service.yaml
kubectl get pods
kubectl get svc

Common Errors


ImagePullBackOff â†’ Wrong image/tag


Pending LB â†’ Wait for IP


Port mismatch â†’ containerPort vs targetPort


Interview Explanation

Kubernetes runs containers via Deployments and exposes them using Services.

âŒ STOP NOTES HERE

ğŸš¦CONFIRMATION REQUIRED (ONE LINE)
After you access the app in browser, reply:
ğŸ‘‰ â€œApplication successfully deployed and accessible on GKEâ€
Then we will IMMEDIATELY do CLEANUP (terraform destroy)
and after that we will practice Terraform code & start second repo ğŸ’ª