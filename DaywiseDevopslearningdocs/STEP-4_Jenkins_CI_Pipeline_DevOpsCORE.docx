ğŸš€ STEP-4: Jenkins CI Pipeline (DevOps CORE)
ğŸ”‘ MUST KNOW (4+ Years DevOps Engineer)

By the end of this step, you must clearly understand:

Why Jenkins is needed

What Jenkins actually does

What a Jenkinsfile is

How Jenkins runs pytest + Docker automatically

How CI fits into the overall DevOps lifecycle

1ï¸âƒ£ Why Jenkins? (Not Just â€œBecause DevOpsâ€)
Real-world problem

Developers push code

Someone forgets to test

Someone forgets to build

Broken code reaches production

Jenkins solves this by:

âœ” Automating validation
âœ” Enforcing discipline
âœ” Acting as a gatekeeper

No Jenkins = No production deployment (in real companies)

2ï¸âƒ£ Jenkins Role in YOUR Project

Your CI flow will be:

GitHub push
   â†“
Jenkins job triggered
   â†“
Install dependencies
   â†“
Run pytest
   â†“
Build Docker image


âš ï¸ If pytest fails â†’ pipeline stops
âš ï¸ Docker image is built only if tests pass

3ï¸âƒ£ Jenkins Installation (Ubuntu)
Step 3.1 â€“ Update system
sudo apt update

Step 3.2 â€“ Install Java (Jenkins needs Java)
sudo apt install -y openjdk-17-jdk
java -version


ğŸ”‘ MUST KNOW

Jenkins is a Java application

Java version mismatch = Jenkins issues

Step 3.3 â€“ Install Jenkins
curl -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key | sudo tee \
  /usr/share/keyrings/jenkins-keyring.asc > /dev/null

echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] \
  https://pkg.jenkins.io/debian-stable binary/ | sudo tee \
  /etc/apt/sources.list.d/jenkins.list > /dev/null

sudo apt update
sudo apt install -y jenkins

Step 3.4 â€“ Start Jenkins
sudo systemctl start jenkins
sudo systemctl enable jenkins


Check status:

sudo systemctl status jenkins

Step 3.5 â€“ Access Jenkins UI

Open browser:

http://localhost:8080


Get admin password:

sudo cat /var/lib/jenkins/secrets/initialAdminPassword

ğŸ”‘ MUST KNOW

Jenkins runs as user jenkins

Jenkins workspace is separate from your user home

4ï¸âƒ£ Jenkins Initial Setup (UI)

Paste admin password

Install Suggested Plugins

Create admin user

Finish setup

5ï¸âƒ£ Install Required Jenkins Plugins

Go to:

Manage Jenkins â†’ Plugins â†’ Available


Install:

âœ” Git

âœ” Pipeline

âœ” Docker Pipeline

Restart Jenkins if prompted.

6ï¸âƒ£ Jenkins Needs Docker Access (VERY IMPORTANT)

By default, Jenkins cannot run docker commands.

Fix it:

sudo usermod -aG docker jenkins
sudo systemctl restart jenkins


ğŸ”‘ MUST KNOW

Jenkins must talk to Docker daemon

This is a very common real-world issue

7ï¸âƒ£ Jenkinsfile (CI Pipeline Definition)

ğŸ“„ Jenkinsfile (already in repo â€“ update it)

pipeline {
    agent any

    stages {
        stage('Checkout Code') {
            steps {
                git branch: 'main',
                    url: 'https://github.com/<your-username>/school-management-app.git'
            }
        }

        stage('Install Dependencies') {
            steps {
                sh 'pip install -r requirements.txt'
            }
        }

        stage('Run Pytest') {
            steps {
                sh 'python3 -m pytest -v'
            }
        }

        stage('Build Docker Image') {
            steps {
                sh 'docker build -t school-app:ci .'
            }
        }
    }
}

ğŸ”‘ MUST KNOW (Very Important)

Jenkinsfile = CI logic as code

Stored in GitHub

Versioned

Reviewed like application code

8ï¸âƒ£ Create Jenkins Pipeline Job

Jenkins â†’ New Item

Name: school-app-ci

Type: Pipeline

Definition:

Pipeline script from SCM

SCM: Git

Repo URL: GitHub repo

Branch: main

Script Path: Jenkinsfile

Save

9ï¸âƒ£ Run the Pipeline

Click Build Now

Expected stages:

Checkout âœ”

Install deps âœ”

Pytest âœ”

Docker build âœ”

ğŸ§  Interview-Level Explanation

Q: What does your CI pipeline do?

Your Answer (4+ yrs):

â€œOur Jenkins pipeline checks out code, installs dependencies, runs pytest for validation, and builds a Docker image only if tests pass.â€

ğŸ”¥ This is a production-ready answer.

ğŸ” VERY IMPORTANT: How YOU Should Practice This Again

After we finish full deployment:

You must:

Create another repo

Write a different Flask app

Rebuild:

Jenkins

Docker

Pytest

Pipeline

My role in second project:

âŒ I will NOT give full code

âœ… I will review

âœ… I will debug errors with you

âœ… I will ask why questions (like interviews)

Thatâ€™s how confidence comes.

âš ï¸ COMMON MISTAKES (Watch These)

âŒ Jenkins canâ€™t run docker â†’ forgot docker group
âŒ Pytest fails in Jenkins â†’ missing dependency
âŒ Hardcoding secrets in Jenkinsfile
âŒ Running Jenkins as root

âœ… What to Do NOW

1ï¸âƒ£ Install Jenkins
2ï¸âƒ£ Configure Docker access
3ï¸âƒ£ Create pipeline job
4ï¸âƒ£ Run build