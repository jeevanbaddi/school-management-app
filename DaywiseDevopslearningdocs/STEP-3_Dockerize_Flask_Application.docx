ğŸš€ STEP-3: Dockerize the Flask Application
ğŸ”‘ MUST KNOW (4+ Years DevOps Engineer)

What a Dockerfile is

How an image is built

Difference between image & container

How CI tools (Jenkins) use Docker

How containers run the same way in local, Jenkins, and GKE

1ï¸âƒ£ Why Docker is Required (DevOps Perspective)
Problem without Docker:

â€œIt works on my machineâ€ issue

Different Python versions

Missing dependencies in prod

Docker solves:

âœ” Same runtime everywhere
âœ” Immutable artifacts
âœ” Easy CI/CD integration

ğŸ‘‰ Docker image becomes the deployable unit.

2ï¸âƒ£ Dockerfile (This is Production-Style, Simple)

ğŸ“„ Dockerfile

# Base image
FROM python:3.10-slim

# Set working directory inside container
WORKDIR /app

# Copy dependency file first (layer caching)
COPY requirements.txt .

# Install dependencies
RUN pip install --no-cache-dir -r requirements.txt

# Copy application code
COPY . .

# Expose Flask port
EXPOSE 5000

# Start application
CMD ["python", "app/main.py"]

ğŸ”‘ MUST KNOW (Interview)

FROM â†’ Base OS + runtime

WORKDIR â†’ Default directory inside container

COPY requirements.txt . â†’ Layer caching optimization

RUN â†’ Executes during image build

CMD â†’ Executes when container starts

EXPOSE â†’ Documentation + container networking

âš ï¸ COMMON MISTAKE

âŒ Copy code first, then install dependencies
âœ” Always copy requirements.txt first for cache reuse

3ï¸âƒ£ Build Docker Image (Local)
docker build -t school-app:1.0 .

ğŸ”‘ MUST KNOW

-t â†’ Tag image

. â†’ Docker build context

Image is immutable

Verify:

docker images

4ï¸âƒ£ Run Container Locally
docker run -d -p 5000:5000 --name school-app school-app:1.0


Open browser:

http://localhost:5000


Expected:

{"status":"ok"}

ğŸ”‘ MUST KNOW

-p 5000:5000 â†’ host:container port mapping

Container runs isolated

Same image will run in GKE later

5ï¸âƒ£ Test Inside Container (IMPORTANT)
docker exec -it school-app python3 -m pytest -v

MUST KNOW (VERY IMPORTANT)

Confirms container has:

Code

Dependencies

Tests

Jenkins will do the same thing

6ï¸âƒ£ Stop & Clean Up
docker stop school-app
docker rm school-app

7ï¸âƒ£ Git Commit (Docker Step)
git status
git add Dockerfile
git commit -m "Dockerize Flask app"
git push

ğŸ§  Interview-Ready Explanation

Q: How do you containerize applications?

Your Answer (4+ yrs level):

â€œWe create a Dockerfile using a minimal base image, install dependencies, copy application code, expose required ports, and define an entrypoint. The same image is used across local, CI, and Kubernetes to ensure consistency.â€

ğŸ”¥ This is exact production language.

ğŸ“Œ GOOD TO KNOW

Multi-stage builds (later)

Non-root users (later)

Image scanning (later)